"use strict";(self.webpackChunkfreshcart=self.webpackChunkfreshcart||[]).push([[992],{6666:(x,f,m)=>{m.r(f),m.d(f,{LoginComponent:()=>A});var _=m(6814),r=m(95),h=m(1120),e=m(4769),Z=m(304);function T(t,d){1&t&&(e.TgZ(0,"p"),e._uU(1,"email is required . "),e.qZA())}function l(t,d){1&t&&(e.TgZ(0,"p"),e._uU(1,"This email is invalid . "),e.qZA())}function i(t,d){if(1&t&&(e.TgZ(0,"div",14),e.YNc(1,T,2,0,"p",11),e.YNc(2,l,2,0,"p",11),e.qZA()),2&t){const a=e.oxw();let n,o;e.xp6(1),e.Q6J("ngIf",null==(n=a.loginForm.get("email"))?null:n.getError("required")),e.xp6(1),e.Q6J("ngIf",null==(o=a.loginForm.get("email"))?null:o.getError("email"))}}function g(t,d){1&t&&(e.TgZ(0,"p"),e._uU(1,"password is required . "),e.qZA())}function s(t,d){1&t&&(e.TgZ(0,"p"),e._uU(1,"password must be more than 6 . "),e.qZA())}function u(t,d){if(1&t&&(e.TgZ(0,"div",14),e.YNc(1,g,2,0,"p",11),e.YNc(2,s,2,0,"p",11),e.qZA()),2&t){const a=e.oxw();let n,o;e.xp6(1),e.Q6J("ngIf",null==(n=a.loginForm.get("password"))?null:n.getError("required")),e.xp6(1),e.Q6J("ngIf",null==(o=a.loginForm.get("password"))?null:o.getError("pattern"))}}function p(t,d){1&t&&(e.TgZ(0,"span"),e._UZ(1,"i",15),e.qZA())}function w(t,d){if(1&t&&(e.TgZ(0,"p",16),e._uU(1),e.qZA()),2&t){const a=e.oxw();e.xp6(1),e.Oqu(a.errorMsg)}}let A=(()=>{class t{constructor(a,n,o){this._AuthService=a,this._Router=n,this._FormBuilder=o,this.isLoading=!1,this.loginForm=this._FormBuilder.group({email:["",[r.kI.required,r.kI.email]],password:["",[r.kI.required,r.kI.pattern(/^[a-zA-Z0-9]{6,}$/)]]})}handelForm(){console.log(this.loginForm.value),this.isLoading=!0,!0===this.loginForm.valid&&this._AuthService.login(this.loginForm.value).subscribe({next:n=>{console.log(n),"success"==n.message&&(this.isLoading=!1,localStorage.setItem("etoken",n.token),this._AuthService.decodeUser(),this._Router.navigate(["./home"]))},error:n=>{console.log(n),this.isLoading=!1,this.errorMsg=n.error.message}})}static#e=this.\u0275fac=function(n){return new(n||t)(e.Y36(Z.e),e.Y36(h.F0),e.Y36(r.qu))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-login"]],standalone:!0,features:[e.jDz],decls:21,vars:6,consts:[[1,"w-75","m-auto","shadow","rounded","p-3","my-5","bg-main-light","login"],[1,"fw-light","my-3"],[3,"formGroup","ngSubmit"],[1,"form-item","my-2"],["for","email"],["id","email","type","email","formControlName","email",1,"form-control","shadow-none"],["class","alert alert-danger p-1 small text-center",4,"ngIf"],["for","password"],["id","password","type","password","formControlName","password",1,"form-control","shadow-none"],[1,"d-flex","align-items-center","justify-content-between"],[1,"main-btn","my-2","py-2","px-4",3,"disabled"],[4,"ngIf"],["routerLink","/forget",1,"text-main","text-decoration-none","small","fw-semibold","cursor-pointer"],["class","alert alert-danger text-center p-1 my-1",4,"ngIf"],[1,"alert","alert-danger","p-1","small","text-center"],[1,"fas","fa-spin","fa-spinner"],[1,"alert","alert-danger","text-center","p-1","my-1"]],template:function(n,o){if(1&n&&(e.TgZ(0,"section",0)(1,"h1",1),e._uU(2,"Login Now :"),e.qZA(),e.TgZ(3,"form",2),e.NdJ("ngSubmit",function(){return o.handelForm()}),e.TgZ(4,"div",3)(5,"label",4),e._uU(6,"Email:"),e.qZA(),e._UZ(7,"input",5),e.qZA(),e.YNc(8,i,3,2,"div",6),e.TgZ(9,"div",3)(10,"label",7),e._uU(11,"Password:"),e.qZA(),e._UZ(12,"input",8),e.qZA(),e.YNc(13,u,3,2,"div",6),e.TgZ(14,"div",9)(15,"button",10),e._uU(16,"Login "),e.YNc(17,p,2,0,"span",11),e.qZA(),e.TgZ(18,"a",12),e._uU(19," Forget Password ?"),e.qZA()()(),e.YNc(20,w,2,1,"p",13),e.qZA()),2&n){let c,v;e.xp6(3),e.Q6J("formGroup",o.loginForm),e.xp6(5),e.Q6J("ngIf",(null==(c=o.loginForm.get("email"))?null:c.errors)&&(null==(c=o.loginForm.get("email"))?null:c.touched)),e.xp6(5),e.Q6J("ngIf",(null==(v=o.loginForm.get("password"))?null:v.errors)&&(null==(v=o.loginForm.get("password"))?null:v.touched)),e.xp6(2),e.Q6J("disabled",o.loginForm.invalid),e.xp6(2),e.Q6J("ngIf",o.isLoading),e.xp6(3),e.Q6J("ngIf",o.errorMsg)}},dependencies:[_.ez,_.O5,r.UX,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,h.rH],styles:["@media all and (max-width: 575px){.login[_ngcontent-%COMP%]{width:95%!important;margin:50px auto auto!important}}"]})}return t})()},6726:(x,f,m)=>{function _(l){this.message=l}m.d(f,{Z:()=>T}),(_.prototype=new Error).name="InvalidCharacterError";var r=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(l){var i=String(l).replace(/=+$/,"");if(i.length%4==1)throw new _("'atob' failed: The string to be decoded is not correctly encoded.");for(var g,s,u=0,p=0,w="";s=i.charAt(p++);~s&&(g=u%4?64*g+s:s,u++%4)?w+=String.fromCharCode(255&g>>(-2*u&6)):0)s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(s);return w};function e(l){this.message=l}(e.prototype=new Error).name="InvalidTokenError";const T=function Z(l,i){if("string"!=typeof l)throw new e("Invalid token specified");var g=!0===(i=i||{}).header?0:1;try{return JSON.parse(function h(l){var i=l.replace(/-/g,"+").replace(/_/g,"/");switch(i.length%4){case 0:break;case 2:i+="==";break;case 3:i+="=";break;default:throw"Illegal base64url string!"}try{return decodeURIComponent(r(i).replace(/(.)/g,function(s,u){var p=u.charCodeAt(0).toString(16).toUpperCase();return p.length<2&&(p="0"+p),"%"+p}))}catch{return r(i)}}(l.split(".")[g]))}catch(s){throw new e("Invalid token specified: "+s.message)}}}}]);